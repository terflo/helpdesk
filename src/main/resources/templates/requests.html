<!DOCTYPE html>
<html lang="ru" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <title>Запросы</title>
        <link th:href="@{css/requests.css}" rel="stylesheet" type="text/css"/>
    </head>
    <body>
    <h1 th:text="'Обращения пользователя ' + ${user.username}"></h1>

    <a th:href="@{/requests/add}">Добавить обращение</a>

    <br>
    <br>

    <table class="table">
        <thead>
            <tr>
                <th>Номер</th>
                <th>Наименование</th>
                <th>Статус</th>
                <th>Приоритет</th>
                <th>Оператор</th>
                <th></th>
                <th th:if="${#sets.contains(user.roles, 'ROLE_OPERATOR')}"></th>
            </tr>
        </thead>
        <tbody th:if="not ${requests.empty}" th:each="request : ${requests}">
            <tr>
                <td th:text="${request?.id}"></td>
                <td th:text="${request?.name}"></td>
                <td th:text="${request?.status}"></td>
                <td th:text="${request?.priority}"></td>
                <td th:text="${request?.operator?.username}"></td>
                <td>
                    <a th:href="'/requests/' + ${request?.id}">Просмотреть</a>
                </td>
                <td th:if="${#sets.contains(user.roles, 'ROLE_OPERATOR')}">
                    <a th:href="'/requests/close/' + ${request?.id}">Завершить</a>
                </td>
            </tr>
        </tbody>
    </table>

    </body>
</html>