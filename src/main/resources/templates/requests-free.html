<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <title>Запросы</title>
        <link rel="shortcut icon" th:href="@{~/img/help.png}" type="image/png">
        <link th:href="@{~/css/requests.css}" rel="stylesheet" type="text/css"/>
        <link th:href="@{~/css/bootstrap.css}" rel="stylesheet" type="text/css"/>
        <script th:src="@{~/js/bootstrap.js}" rel="script" type="text/javascript"></script>
        <script th:src="@{~/js/free-requests.js}" rel="script" type="text/javascript"></script>
        <script th:src="@{~/js/jQuery.js}" rel="script" type="text/javascript"></script>
    </head>
    <body>
        <div th:insert="blocks/navigation"></div>
        <main style="min-height: 38vw">
            <h1 th:text="'Cвободные обращения'"></h1>
            <table class="table" style="text-align: center; vertical-align: middle;">
                <thead>
                <tr>
                    <th>#</th>
                    <th>Наименование</th>
                    <th>Статус</th>
                    <th>Приоритет</th>
                    <th>Отправитель</th>
                    <th>Просмотреть</th>
                    <th>Принять</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="request : ${requests}" th:id="'request_row_' + ${request?.id}">
                    <td th:text="${request.id}"></td>
                    <td th:text="${request.name}"></td>
                    <td  th:switch="${request?.status}">
                        <label th:id="'request_status_' + ${request?.id}" th:case="${T(com.terflo.helpdesk.model.entity.enums.RequestStatus).IN_PROCESS}">В работе</label>
                        <label th:id="'request_status_' + ${request?.id}" th:case="${T(com.terflo.helpdesk.model.entity.enums.RequestStatus).CLOSED}">Закрыто</label>
                        <label th:id="'request_status_' + ${request?.id}" th:case="${T(com.terflo.helpdesk.model.entity.enums.RequestStatus).BEGINNING}">Начато</label>
                    </td>
                    <td th:switch="${request?.priority}">
                        <label th:case="${T(com.terflo.helpdesk.model.entity.enums.PriorityStatus).LOW}">Низкий</label>
                        <label th:case="${T(com.terflo.helpdesk.model.entity.enums.PriorityStatus).NORMAL}">Средний</label>
                        <label th:case="${T(com.terflo.helpdesk.model.entity.enums.PriorityStatus).MAX}">Высокий</label>
                    </td>
                    <td>
                        <a th:href="'/user/' + ${request?.user?.username}" th:text="${request?.user?.username}"></a>
                    </td>
                    <td>
                        <a th:href="'/requests/' + ${request?.id}"><img th:src="@{~/img/loupe.png}" style="height: 2vw" alt="see details"></a>
                    </td>
                    <td><input th:onclick="'acceptRequest(' + ${request?.id} + ');'" style="width: 5%" class="panel-button" type="image" th:src="@{../img/ok.png}" alt="accept request"></td>
                </tr>
                </tbody>
            </table>
        </main>
        <div th:insert="blocks/footer"></div>
    </body>
</html>